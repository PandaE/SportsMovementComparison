# 实验模块测试指南

## 📁 测试目录结构

```
tests/experimental/
├── __init__.py                    # Python包标识
├── test_frame_comparator.py       # 帧对比器测试脚本
├── test_images/                   # 测试图像存放目录
│   ├── user_setup.jpg            # 用户架拍关键帧图像
│   └── standard_setup.jpg        # 标准架拍关键帧图像
├── test_data/                     # 其他测试数据（可选）
└── test_output/                   # 测试结果输出目录
    ├── user_pose_annotated.png    # 用户姿态标注图
    ├── standard_pose_annotated.png # 标准姿态标注图
    └── side_by_side_comparison.png # 并排对比图
```

## 🚀 使用方法

### 1. 准备测试图像

将你的正手高远球关键帧图像放到 `test_images/` 目录：

- `user_setup.jpg` - 用户的架拍阶段结束关键帧
- `standard_setup.jpg` - 标准的架拍阶段结束关键帧

### 2. 运行测试

```bash
cd tests/experimental
python test_frame_comparator.py
```

或者从项目根目录运行：

```bash
python tests/experimental/test_frame_comparator.py
```

### 3. 查看结果

测试完成后，检查 `test_output/` 目录中的结果：

- **控制台输出**：详细的测试过程和评分结果
- **可视化图像**：标注了姿态关键点的对比图像

## 📊 测试流程

1. **图像加载** - 验证测试图像是否存在和正确加载
2. **系统初始化** - 加载配置和初始化对比器
3. **姿态提取** - 从两张图像中提取人体姿态
4. **角度计算** - 计算大臂小臂夹角
5. **对比评分** - 进行帧对比和评分计算
6. **可视化生成** - 生成标注图像和对比图
7. **结果解释** - 输出评分解释和改进建议

## 🔍 测试要点

### 姿态检测质量检查
- 关键点坐标是否合理
- 置信度是否足够高
- 是否所有必要的关键点都被检测到

### 角度计算验证
- 计算角度是否在生理合理范围内（60-180度）
- 通过可视化验证角度计算是否正确

### 评分机制测试
- 评分是否反映了实际的技术差异
- 容忍度判断是否合理
- 改进建议是否有针对性

## 💡 故障排除

### 常见问题

1. **图像加载失败**
   - 检查图像文件是否存在
   - 确认图像格式是否支持（jpg, png等）

2. **姿态提取失败**
   - 图像中人物是否清晰可见
   - 是否存在遮挡或角度问题
   - 尝试调整图像质量或拍摄角度

3. **角度计算异常**
   - 检查关键点检测是否准确
   - 查看可视化图像验证姿态标注

4. **导入模块失败**
   - 确认在正确的Python环境中运行
   - 检查项目路径设置是否正确

## 📈 扩展测试

你可以基于这个测试脚本进行扩展：

1. **批量测试** - 测试多组图像对
2. **性能测试** - 测量处理时间
3. **准确性验证** - 与人工标注对比
4. **鲁棒性测试** - 测试不同光照、角度等条件

## 📝 测试记录

建议记录每次测试的结果：
- 图像描述
- 计算角度
- 评分结果
- 可视化验证
- 改进建议的合理性